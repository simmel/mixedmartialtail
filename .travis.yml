language: python
python:
  - "2.7"
  - "3.4"
  - "3.5"
  - "pypy"
  - "pypy3"
env:
  - TIME_CMD=/usr/bin/time -f 'real=%e system=%S user=%S max_rss=%M io=%I ctx_switch=%w exit=%x cmd="%C"'
addons:
  apt:
    packages:
    - lrzip
install: "make pre-test"
script:
  - $TIME_CMD curl -o demo.log.lrz -L https://stockholmuniversity.box.com/shared/static/u30tyl64mvngrl6b2hlksu5tu2i0wq9u.lrz
  - $TIME_CMD lrzip -cdk -o demo.log demo.log.lrz
  - $TIME_CMD cat demo.log >/dev/null
  - $TIME_CMD cat demo.log >/dev/null
  - $TIME_CMD cat demo.log >/dev/null
  - $TIME_CMD du -sh demo.log*
  - make test
